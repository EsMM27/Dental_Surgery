@page
@model Dental_Surgery.Pages.IndexModel
@{
    ViewData["Title"] = "Dashboard";
    var hour = DateTime.Now.Hour;
    var greeting = hour < 12 ? "Good morning" : (hour < 16 ? "Good afternoon" : "Good evening");
}
<h2 class="mb-3">
    @greeting@if (!string.IsNullOrEmpty(Model.DisplayName))
    {
        <text>, @Model.DisplayName</text>
    }
</h2>


@if (User.IsInRole("Receptionist"))
{
    <div class="card shadow-sm p-4">
        <h3 class="mb-3">📅 Receptionist Dashboard</h3>
        <ul class="list-group mb-3">
            <li class="list-group-item d-flex justify-content-between">
                <span>Appointments Today:</span>
                <strong>@Model.AppointmentsToday</strong>
            </li>
            <li class="list-group-item d-flex justify-content-between">
                <span>Dentists on Duty:</span>
                <strong>@Model.DentistsOnDuty</strong>
            </li>
        </ul>

        <div>
            <a class="btn btn-primary me-2" asp-page="/Shared/Schedule">📖 View Schedule</a>
            <a class="btn btn-success me-2" asp-page="/Admin2/Patients/Index">👥 Manage Patients</a>
            <a class="btn btn-secondary" asp-page="/Admin2/Appointments/Create">➕ New Appointment</a>
        </div>
    </div>
}

@if (User.IsInRole("Dentist"))
{
    <div class="card shadow-sm p-4">
        <h3 class="mb-3">🦷 Dentist Dashboard</h3>
        <ul class="list-group mb-3">
            <li class="list-group-item d-flex justify-content-between">
                <span>Appointments Today:</span>
                <strong>@Model.AppointmentsToday</strong>
            </li>
            <li class="list-group-item d-flex justify-content-between">
                <span>Next Appointment:</span>
                <strong>@Model.NextAppointmentTime - @Model.NextPatientName</strong>
            </li>
        </ul>

        <div>
            <a class="btn btn-primary me-2" asp-page="/Shared/Schedule">📅 View My Schedule</a>
            <a class="btn btn-secondary" asp-page="/Admin2/Patients/History">📄 Patient History</a>
        </div>
    </div>
}
